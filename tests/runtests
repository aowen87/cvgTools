#!/bin/bash

#TEST 1
../src/cvgTools --command=ToWig --input_type=c --input=input/countsFiles/count9 --out_path=output/cov2wig/

DIFF=$(diff correct/cov2wig/out1.wig output/cov2wig/count9_0.wig)

if [ "$DIFF" != "" ]
then
    printf "\nTEST 1 FAILED: \n"
    printf "$DIFF\n\n"
else
    printf "test 1 passed\n"
fi


#TEST 2
../src/cvgTools --command=ToWig --input_type=b --input=input/bedFiles/gaps --out_path=output/cov2wig/

DIFF=$(diff correct/cov2wig/out2.wig output/cov2wig/gaps_0.wig)

if [ "$DIFF" != "" ]
then
    printf "\nTEST 2 FAILED: \n"
    printf "$DIFF\n\n"
else
    printf "test 2 passed\n"
fi


#TEST 3
../src/cvgTools --command=ToWig --input_type=b --input=input/bedFiles/gaps2 --out_path=output/cov2wig/

DIFF=$(diff correct/cov2wig/out2.wig output/cov2wig/gaps2_0.wig)

if [ "$DIFF" != "" ]
then
    printf "\nTEST 3 FAILED: \n"
    printf "$DIFF\n\n"
else
    printf "test 3 passed\n"
fi


#TEST 4
../src/cvgTools --command=GeneAvg --input_type=c --input=input/countsFiles/geneCount2 --out_path=output/geneAvg/ --transcripts=input/transcripts/small.bed 

DIFF=$(diff correct/geneAvg/geneOut output/geneAvg/geneCount2_GA_0.txt)

if [ "$DIFF" != "" ]
then
    printf "\nTEST 4 FAILED: \n"
    printf "$DIFF\n\n"
else
    printf "test 4 passed\n"
fi


#TEST5
../src/cvgTools --command=GenicWindows --input_type=c --input=input/countsFiles/geneCount2 --out_path=output/geneWig/ --transcripts=input/transcripts/small.bed

DIFF=$(diff correct/geneWig/genic2.wig output/geneWig/geneCount2_GW_0.wig)

if [ "$DIFF" != "" ]
then 
    printf "\nTEST 5 FAILED: \n"
    printf "$DIFF\n\n"
else
    printf "test 5 passed\n"
fi


#TEST6
../src/cvgTools --command=GeneAvg --input_type=c --input=input/countsFiles/geneCount2_O --out_path=output/geneAvg/ --transcripts=input/transcripts/overlap.bed

DIFF=$(diff correct/geneAvg/overlap output/geneAvg/geneCount2_O_GA_0.txt)

if [ "$DIFF" != "" ]
then 
    printf "\nTEST 6 FAILED: \n"
    printf "$DIFF\n\n"
else
    printf "test 6 passed\n"
fi


#TEST7
../src/cvgTools --command=GenicWindows --input_type=c --input=input/countsFiles/geneCount2_O --out_path=output/geneWig/ --transcripts=input/transcripts/overlap.bed

DIFF=$(diff correct/geneWig/overlap.wig output/geneWig/geneCount2_O_GW_0.wig)

if [ "$DIFF" != "" ]
then 
    printf "\nTEST 7 FAILED: \n"
    printf "$DIFF\n\n"
else
    printf "test 7 passed\n"
fi

printf "TESTS END\n"
